# 6) 운영자 플로우 (Creator/Admin 관점)

## 개요

운영자(콘텐츠 크리에이터/관리자) 플로우는 FORMTION을 사용하여 콘텐츠를 설정하고 배포하는 과정을 설명한다. 목표는 "설정 자유도는 높이되, 복잡한 옵션은 고급설정으로 숨겨서 단순화"하는 것이다.

---

## 6.1 프로젝트 생성 (3-step, 랜딩 없음)

### 개요
새로운 프로젝트를 생성하는 과정은 3단계로 구성된다. 랜딩 페이지 없이 바로 프로젝트 생성 플로우로 진입한다.

---

### Step 1: Notion URL 입력

#### 목적
Notion 공개 공유 링크를 입력받아 콘텐츠를 불러온다.

#### 화면 구성
- **Title**: "콘텐츠를 불러오세요"
- **Input 필드**: 
  - Placeholder: "Notion 공유 링크를 붙여넣기"
  - 유효성 검사: URL 형식 검사
- **Button**: "Load preview"
- **도움말 텍스트**: "Notion에서 '공개'로 공유 설정된 링크만 사용할 수 있어요."

#### 동작 플로우

##### 정상 케이스
1. 사용자가 Notion URL 입력
2. "Load preview" 버튼 클릭
3. 로딩 스피너 표시
4. iframe으로 Notion 콘텐츠 프리뷰 표시
5. 프리뷰가 정상적으로 로드되면 "Next" 버튼 활성화
6. "Next" 버튼 클릭 → Step 2로 이동

##### 에러 케이스

**에러 1: 공개 공유 링크가 아님**
- 에러 메시지: "이 링크는 공개 공유가 아니에요. Notion에서 '공개'로 바꿔주세요."
- 해결 방법 안내: "Notion 페이지 우측 상단 '공유' 버튼 → '웹에 공개' 활성화"
- 프리뷰는 표시되지 않음

**에러 2: 잘못된 URL 형식**
- 에러 메시지: "올바른 Notion 링크 형식이 아니에요."
- 프리뷰는 표시되지 않음

**에러 3: 로딩 실패**
- 에러 메시지: "불러오기에 실패했어요. 링크를 다시 확인해 주세요."
- 재시도 버튼 표시
- 가능한 원인 안내:
  - 인터넷 연결 확인
  - Notion 링크가 정상적으로 공개되어 있는지 확인
  - 링크를 브라우저에서 직접 열어 확인

**에러 4: 접근 권한 없음**
- 에러 메시지: "이 페이지에 접근할 수 없어요. Notion에서 공개 설정을 확인해 주세요."
- 프리뷰는 표시되지 않음

#### 기술적 구현
- Notion URL 유효성 검사 (정규식)
- iframe으로 프리뷰 렌더링
- iframe 로드 이벤트 감지
- 에러 핸들링 (타임아웃, CORS 등)

---

### Step 2: 게이트 UX 선택

#### 목적
어떤 UX 패턴으로 리드를 수집할지 선택한다.

#### 화면 구성
- **Title**: "어떤 방식으로 흐름을 만들까요?"
- **Sub-title**: "가볍게 유도할 수도, 중요한 구간에서만 멈추게 할 수도 있어요."
- **옵션 체크박스**:
  - [ ] 상단 폼 (Top Form)
  - [ ] 하단 폼 (Bottom Form)
  - [ ] Entry 모달 (접속 즉시 모달)
  - [ ] Floating CTA (우측 하단 CTA 버튼)
  - [ ] Inline Blur Gate (본문 중간 인라인 블러 게이트)

#### 옵션 설명 (짧게)
각 옵션에 대한 간단한 설명과 아이콘 표시:

- **상단 폼**: "문서처럼 자연스럽게 - 콘텐츠 상단에 폼을 배치합니다."
- **하단 폼**: "읽은 후 강하게 - 콘텐츠 하단에 폼을 배치합니다."
- **Entry 모달**: "시작부터 확실하게 - 페이지 진입 시 즉시 모달을 표시합니다."
- **Floating CTA**: "방해 없이 최소한으로 - 우측 하단 버튼으로 필요 시에만 폼을 엽니다."
- **Inline Blur Gate**: "핵심 구간에서 강하게 - 콘텐츠 중간 특정 구간을 블러 처리합니다."

#### 동작 플로우

##### 기본 플로우
1. 사용자가 원하는 옵션 체크 (복수 선택 가능)
2. 옵션 선택 시 간단한 미리보기 또는 설명 추가 표시
3. "Next" 버튼 클릭 → Step 3로 이동

##### 충돌 규칙 적용
- **Entry Modal + Top/Bottom Form**: 
  - Entry Modal 선택 시 경고 메시지: "Entry 모달이 있으면 상/하단 폼은 표시되지 않습니다. 계속하시겠어요?"
  - 사용자가 확인하면 Top/Bottom Form은 자동으로 해제되거나 무시됨

- **여러 Inline Blur Gate**: 
  - MVP에서는 1개만 지원
  - 여러 개 선택 시 경고: "현재는 1개의 블러 구간만 지원합니다."

##### 검증
- 최소 1개는 선택해야 함 (에러 메시지: "최소 1개의 옵션을 선택해 주세요.")
- 선택하지 않으면 "Next" 버튼 비활성화

---

### Step 3: 블라인드 설정

#### 목적
콘텐츠의 어느 부분을 블라인드할지 설정한다.

#### 화면 구성

##### 간단 모드 (기본)
- **Title**: "어디를 공개할까요?"
- **프리셋 선택**:
  - [ ] 초반만 공개 (상단 20%만 보이고 나머지 블러)
  - [ ] 중간부터 잠금 (상단 50%는 보이고 나머지 블러)
  - [ ] 하단 핵심만 잠금 (상단 80%는 보이고 하단 20% 블러)
- **블라인드 방식 선택**:
  - [ ] 섹션 블러 (간단하고 안정적)
  - [ ] 프리뷰 + 블러 (추천, 호기심 유발) ← 기본 선택

##### 고급 모드 (접어서 숨김)
- **Toggle**: "고급 설정 보기"
- **블러 강도**: 약 / 중 / 강 (슬라이더 또는 선택)
- **프리뷰 높이**: N줄 또는 N% (숫자 입력)
- **키워드 블랙아웃 (베타)**:
  - [ ] 키워드 블랙아웃 사용
  - 키워드 리스트 입력 (텍스트 영역, 줄바꿈으로 구분)
  - 대소문자 구분 [ ] 옵션
  - 경고: "베타 기능입니다. Notion DOM 구조 변경 시 자동으로 섹션 블러로 전환될 수 있습니다."

#### 동작 플로우

##### 기본 플로우
1. 사용자가 프리셋 선택 (초반/중간/하단)
2. 블라인드 방식 선택 (섹션 블러 또는 프리뷰+블러)
3. 실시간 미리보기가 업데이트됨 (좌측 미리보기 영역)
4. "Next" 또는 "Complete" 버튼 클릭 → 프로젝트 생성 완료

##### 고급 설정 사용 시
1. "고급 설정 보기" 토글 클릭
2. 추가 옵션들이 표시됨
3. 블러 강도, 프리뷰 높이 등을 조정
4. 키워드 블랙아웃 사용 시 키워드 리스트 입력
5. 실시간 미리보기가 업데이트됨

#### 검증
- 프리셋 또는 고급 설정 중 하나는 반드시 선택해야 함
- 키워드 블랙아웃 사용 시 키워드 리스트는 필수

---

### 생성 완료 후

#### 화면 구성
- **성공 메시지**: "프로젝트가 생성되었어요!"
- **공유 링크 표시**:
  - 링크 URL (읽기 전용 입력 필드)
  - "Copy link" 버튼
  - "경로 수정" 버튼 (슬러그 편집)
- **액션 버튼**:
  - "프로젝트 설정으로 이동" (추가 설정)
  - "미리보기 보기" (공유 화면 미리보기)
  - "리드 목록 보기" (아직 없을 수 있음)

#### 다음 단계 안내
- "이제 링크를 공유하면 리드가 수집됩니다."
- "설정 화면에서 언제든지 수정할 수 있어요."

---

## 6.2 폼 구성

### 개요
리드 수집에 사용할 폼 필드를 설정한다.

### 기본 필드

#### 필수 필드 (변경 불가)
- **이메일** (Email)
  - 항상 포함됨
  - 이메일 형식 검사
  - 플레이스홀더: "your@email.com"

#### 선택 필드 (기본 제공)
운영자가 ON/OFF할 수 있는 필드들:

- **이름** (Name)
  - [ ] 포함
  - 플레이스홀더: "이름 (선택)"
  
- **회사명** (Company)
  - [ ] 포함
  - 플레이스홀더: "회사명 (선택)"
  
- **직무** (Role)
  - [ ] 포함
  - 객관식 형태 (드롭다운 또는 라디오 버튼)
  - 기본 옵션: "CEO/Founder", "마케팅 담당자", "세일즈 담당자", "기타"
  - 고급설정: 옵션 커스터마이징 (추후 추가 가능)

- **한 줄 질문** (Free Text)
  - [ ] 포함
  - 라벨 설정 가능 (예: "지금 어떤 상황인가요?")
  - 플레이스홀더: "한 줄로 입력해 주세요"

### 동의 옵션

#### 개인정보 처리 동의
- [ ] 포함
- **필수/선택 토글**: 
  - 기본: 필수 (권장)
  - 운영자가 선택으로 변경 가능
- **텍스트**: "개인정보 처리에 동의합니다. (필수)" 또는 "(선택)"
- **정책 링크**: "정책 보기" (고급설정에서 URL 설정 가능)

#### 마케팅 수신 동의
- [ ] 포함
- **기본**: OFF (선택)
- **텍스트**: "업데이트/새 템플릿 소식을 받아볼래요. (선택)"
- **신뢰 문구**: "언제든 구독 해지할 수 있어요."

### 폼 위치별 카피 설정

#### 상단 폼 카피 (상단 폼이 ON인 경우)
- **Title**: 입력 필드 (예: "이 템플릿, 바로 써도 됩니다.")
- **Sub-title**: 입력 필드 (예: "짧게 입력하면 블러가 즉시 풀립니다.")
- **제출 버튼 라벨**: "Unlock & Continue" (기본) 또는 커스터마이징

#### 하단 폼 카피 (하단 폼이 ON인 경우)
- **Title**: 입력 필드 (예: "더 많은 자료가 필요하신가요?")
- **Sub-title**: 입력 필드 (예: "이메일만 입력하면 추가 자료를 보내드려요.")
- **제출 버튼 라벨**: "Unlock" (기본) 또는 커스터마이징

#### 모달/CTA/인라인 카피 (고급설정)
- Entry Modal Title/Sub-title
- Floating CTA 버튼 라벨
- Inline Blur Gate Title/Sub-title
- 각각 별도로 설정 가능

---

## 6.3 실시간 미리보기

### 개요
설정 변경 사항을 실시간으로 확인할 수 있는 미리보기 화면을 제공한다.

### 화면 레이아웃
- **좌측 (60%)**: 미리보기 영역
- **우측 (40%)**: 설정 패널
- **반응형**: 모바일에서는 설정 패널을 접을 수 있음

### 미리보기 영역

#### 컨트롤
- **새로고침 버튼**: 설정 변경 사항을 미리보기에 반영
- **모바일/PC 전환 토글**: 
  - 아이콘: 모바일/PC 아이콘
  - 클릭 시 미리보기 너비 변경
  - PC: 1024px 너비
  - 모바일: 375px 너비 (iPhone 기준)

#### 미리보기 내용
- 실제 공유 화면과 동일한 레이아웃
- Notion 콘텐츠 임베드
- 설정된 블라인드 적용
- 설정된 UX 패턴 표시 (폼/모달/CTA 등)
- 실제 동작 확인 가능 (폼 입력, 제출 시뮬레이션)

#### 미리보기 모드
- **Viewer 모드**: 실제 사용자처럼 체험 (폼 제출 시뮬레이션 가능)
- **Unlocked 모드**: 이미 해제된 상태로 미리보기 (토글)
- **스크롤 테스트**: 스크롤하여 블러 구간 확인

### 설정 패널
- Step 1, 2, 3의 모든 설정을 한 화면에서 수정 가능
- 실시간으로 미리보기가 업데이트됨
- "저장" 버튼으로 변경 사항 저장

---

## 6.4 배포

### 공유 링크 생성

#### 기본 공유 링크
- **형식**: `https://formtion.app/p/{slug}`
- **슬러그 생성 규칙**:
  - 자동 생성: 프로젝트 이름 기반 (한글은 URL 인코딩)
  - 또는 랜덤 문자열 (예: `abc123`)
  - 운영자가 수정 가능

#### 슬러그 편집
- "경로 수정" 버튼 클릭
- 슬러그 입력 필드 (영문, 숫자, 하이픈만 허용)
- "저장" 버튼 클릭
- **중복 검증**:
  - 입력 중 실시간 검증
  - 중복 시 에러: "이미 사용 중인 경로예요. 다른 이름을 입력해 주세요."
  - 사용 가능 시: "사용 가능한 경로입니다." (녹색 체크)

#### 공유 기능
- **Copy link 버튼**: 링크를 클립보드에 복사
- **공유 옵션** (고급설정):
  - UTM 파라미터 자동 추가 (운영자 설정)
  - 소셜 미디어 공유 버튼 (선택)

### 커스텀 도메인 (MVP에서는 UI만)

#### UI 제공
- "커스텀 도메인 설정" 섹션 (고급설정)
- 입력 필드: `https://your-domain.com/p/{slug}`
- **안내 메시지**: 
  - "커스텀 도메인 연결은 현재 베타 기능입니다."
  - "연결을 원하시면 support@formtion.app로 문의해 주세요."
  - 또는 "추후 제공 예정입니다."

---

## 6.5 프로젝트 관리

### 프로젝트 리스트 화면

#### 화면 구성
- **헤더**: "내 프로젝트"
- **프로젝트 카드**:
  - 프로젝트 이름
  - Notion URL (미리보기)
  - 공유 링크 (복사 버튼)
  - 생성일
  - 리드 수 (배지)
  - 액션 버튼: "설정", "미리보기", "리드 목록", "삭제"

#### 필터/검색
- 검색: 프로젝트 이름으로 검색
- 정렬: 최신순, 이름순, 리드 수순

### 프로젝트 설정 화면

#### 탭 구성
- **기본 설정**: Notion URL, UX 패턴, 블라인드 설정
- **폼 설정**: 필드 선택, 동의 옵션, 카피 설정
- **고급 설정**: 블러 강도, 키워드 블랙아웃, 저장 정책 등
- **리드 설정**: Webhook, CSV 내보내기 등

#### 저장
- "저장" 버튼으로 변경 사항 저장
- 저장 성공 시 토스트 메시지: "저장되었어요."
- 저장 실패 시 에러 메시지 표시

---

## 6.6 리드 관리

### 리드 목록 화면

#### 화면 구성
- **헤더**: "리드 목록" + 프로젝트 이름
- **통계 카드** (상단):
  - 총 리드 수
  - 오늘 수집 수
  - 이번 주 수집 수
  - 전환율 (페이지 뷰 대비 리드 수)

#### 리드 테이블
- **컬럼**:
  - 수집일시
  - 이메일
  - 이름 (있는 경우)
  - 회사명 (있는 경우)
  - 직무 (있는 경우)
  - 동의 여부 (마케팅 수신)
  - 액션: "상세보기" (추후 추가)

#### 필터/검색
- 검색: 이메일, 이름, 회사명으로 검색
- 필터:
  - 날짜 범위
  - 동의 여부
  - 필드별 필터

#### 액션 버튼
- **CSV 내보내기**: 
  - "Export CSV" 버튼
  - 다운로드 시작
  - 파일명: `leads_{project_name}_{date}.csv`
  
- **Webhook 테스트**:
  - "Send test payload" 버튼
  - 테스트 데이터로 Webhook 전송
  - 성공/실패 메시지 표시

### Empty State
- 리드가 없을 때:
  - 아이콘 + 메시지: "아직 신호가 없어요."
  - 서브 메시지: "링크를 배포하면 여기에 리드가 쌓입니다."
  - "공유 링크 복사" 버튼

---

## 6.7 로그인/가입 플로우 (비회원 우선 사용)

### 비회원 상태

#### 상단 배너
- 배너 메시지: "지금 만든 설정, 저장하려면 로그인하세요."
- 버튼: "Login to save"
- 배너 닫기 버튼 (X)

#### 비회원으로 사용 가능한 기능
- 프로젝트 생성 및 설정
- 미리보기
- 공유 링크 생성 (임시)

#### 저장/공유 시 모달
- **트리거**: "저장" 또는 "공유하기" 버튼 클릭
- **모달 내용**:
  - Title: "저장하려면 로그인"
  - Body: "이 프로젝트를 저장하고 계속 편집할 수 있어요."
  - Buttons:
    - Primary: "Login" (로그인 화면으로 이동)
    - Secondary: "Continue without saving" (임시로 계속 사용, 닫기)

### 로그인/가입

#### 로그인 화면
- **이메일 입력**: 이메일 형식 검사
- **패스워드 입력**: 최소 8자 (고급 검증은 추후)
- **로그인 버튼**: "Login"
- **링크**: "계정이 없으신가요? 가입하기"

#### 가입 화면
- **이메일 입력**: 이메일 형식 검사
- **패스워드 입력**: 최소 8자
- **패스워드 확인**: 재입력
- **가입 버튼**: "Sign up"
- **링크**: "이미 계정이 있으신가요? 로그인"
- **안내**: "이메일 인증은 현재 제공하지 않습니다. (추후 추가 예정)"

#### 로그인/가입 후
- 로그인/가입 성공 시 프로젝트 생성 화면 또는 프로젝트 리스트로 이동
- 비회원 상태에서 만든 프로젝트는 임시 저장되지 않음 (새로 생성 필요)

---

## 6.8 에러 처리 및 안내

### 일반적인 에러
- **네트워크 오류**: "연결에 문제가 있어요. 잠시 후 다시 시도해 주세요."
- **서버 오류**: "서버에 문제가 발생했어요. 잠시 후 다시 시도해 주세요."
- **권한 오류**: "이 작업을 수행할 권한이 없어요."

### 도움말 및 가이드
- 각 설정 화면에 "?" 아이콘으로 도움말 툴팁 제공
- 주요 기능별 가이드 링크 (추후 추가)
- FAQ 링크 (추후 추가)


