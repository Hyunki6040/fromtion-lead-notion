# 7) 설정 체계 (단순 설정 vs 고급 설정)

## 개요

설정 체계는 "단순 설정"과 "고급 설정"으로 구분하여, 기본 사용자는 간단하게 사용할 수 있으면서도 고급 사용자는 필요한 옵션을 모두 조절할 수 있도록 설계한다.

---

## 7.1 단순 설정 (기본 화면에 노출)

### 목적
대부분의 사용자가 필요한 핵심 설정만 기본 화면에 노출하여, 복잡함 없이 빠르게 프로젝트를 생성하고 배포할 수 있게 한다.

---

### 7.1.1 Notion URL
- **설정 항목**: Notion 공개 공유 링크
- **입력 방식**: 텍스트 입력 필드
- **플레이스홀더**: "Notion 공유 링크를 붙여넣기"
- **유효성 검사**: URL 형식 검사, 공개 공유 링크 확인
- **프리뷰**: "Load preview" 버튼으로 프리뷰 확인

---

### 7.1.2 UX 패턴 체크박스
- **설정 항목**: 게이트 UX 패턴 선택
- **입력 방식**: 체크박스 (복수 선택 가능)
- **옵션**:
  - [ ] 상단 폼 (Top Form)
  - [ ] 하단 폼 (Bottom Form)
  - [ ] Entry 모달 (접속 즉시 모달)
  - [ ] Floating CTA (우측 하단 CTA 버튼)
  - [ ] Inline Blur Gate (본문 중간 인라인 블러 게이트)
- **검증**: 최소 1개 선택 필수
- **설명**: 각 옵션에 대한 간단한 설명 툴팁 제공

---

### 7.1.3 폼 필드 선택
- **설정 항목**: 리드 폼에 포함할 필드
- **입력 방식**: 체크박스 (ON/OFF)
- **옵션**:
  - 이메일 (필수, 변경 불가) ✓
  - [ ] 이름
  - [ ] 회사명
  - [ ] 직무 (객관식)
  - [ ] 한 줄 질문
- **동의 옵션**:
  - [ ] 개인정보 처리 동의 (필수/선택 토글, 기본: 필수)
  - [ ] 마케팅 수신 동의 (선택, 기본: OFF)

---

### 7.1.4 상단 폼 카피 / 하단 폼 카피
- **설정 항목**: 폼 위치별 Title과 Sub-title
- **입력 방식**: 텍스트 입력 필드
- **상단 폼** (상단 폼이 ON인 경우만 표시):
  - Title: 텍스트 입력 (예: "이 템플릿, 바로 써도 됩니다.")
  - Sub-title: 텍스트 입력 (예: "짧게 입력하면 블러가 즉시 풀립니다.")
- **하단 폼** (하단 폼이 ON인 경우만 표시):
  - Title: 텍스트 입력 (예: "더 많은 자료가 필요하신가요?")
  - Sub-title: 텍스트 입력 (예: "이메일만 입력하면 추가 자료를 보내드려요.")

---

### 7.1.5 동의 옵션 ON/OFF
- **설정 항목**: 동의 체크박스 표시 여부
- **입력 방식**: 체크박스 (ON/OFF)
- **옵션**:
  - [ ] 개인정보 처리 동의
    - 필수/선택 토글 (기본: 필수)
  - [ ] 마케팅 수신 동의
    - 기본: OFF (선택)

---

### 7.1.6 해제 유지 방식
- **설정 항목**: unlocked 상태를 얼마나 유지할지
- **입력 방식**: 선택 (드롭다운 또는 라디오 버튼)
- **옵션**:
  - 세션만 (브라우저 닫으면 해제)
  - 7일
  - 30일 (기본)
- **기본값**: 30일
- **설명**: "한 번 입력하면 이 기간 동안 다시 묻지 않아요."

---

## 7.2 고급 설정 (접어서 숨김)

### 목적
고급 사용자가 필요한 세부 옵션을 조절할 수 있도록 제공하되, 기본 화면에서는 숨겨서 복잡도를 낮춘다.

---

### 7.2.1 Inline Blur Gate 위치
- **설정 항목**: 인라인 블러 게이트의 위치 조정
- **입력 방식**: 
  - 프리셋 선택 (초반/중간/하단) - 기본
  - 고급: 픽셀 또는 퍼센트 직접 입력
- **옵션**:
  - "첫 번째 블러 구간" 위치 (MVP에서는 1개만 지원)
  - 드래그로 오버레이 영역 재조정 (MVP 후순위, 구조만 확장 가능)
- **설명**: "콘텐츠 중간 어느 부분을 블러 처리할지 정할 수 있어요."

---

### 7.2.2 블라인드 강도
- **설정 항목**: 블러 효과의 강도
- **입력 방식**: 슬라이더 또는 선택 (약/중/강)
- **옵션**:
  - 약: `blur(5px)`, 오버레이 `rgba(0, 0, 0, 0.2)`
  - 중: `blur(10px)`, 오버레이 `rgba(0, 0, 0, 0.3)` (기본)
  - 강: `blur(20px)`, 오버레이 `rgba(0, 0, 0, 0.4)`
- **기본값**: 중

---

### 7.2.3 Preview 높이 (Preview-Then-Blur인 경우)
- **설정 항목**: 프리뷰로 보여줄 높이
- **입력 방식**: 
  - N줄 (숫자 입력)
  - 또는 N% (퍼센트 입력)
- **기본값**: 3줄 또는 20%
- **설명**: "블러 처리하기 전에 이만큼 보여줘요."

---

### 7.2.4 Entry Modal 설정
- **설정 항목**: Entry 모달의 세부 동작
- **입력 방식**: 체크박스 및 선택
- **옵션**:
  - [ ] 닫기 버튼 허용 (기본: OFF)
    - 허용 시 X 버튼 또는 "Not now" 버튼 표시
  - [ ] N초 후 자동 오픈
    - 선택: 즉시 (0초) / 1초 / 3초 / 5초
    - 기본: 즉시
  - [ ] 미리보기 허용 (Preview first 버튼)
    - 기본: OFF

---

### 7.2.5 Floating CTA 설정
- **설정 항목**: Floating CTA 버튼의 세부 설정
- **입력 방식**: 텍스트 입력 및 체크박스
- **옵션**:
  - 버튼 라벨: 텍스트 입력 (예: "Unlock", "Open", "Continue")
  - [ ] 모바일 하단 고정 (기본: ON)
    - OFF 시 PC와 동일하게 우측 하단

---

### 7.2.6 Keyword Blackout (베타)
- **설정 항목**: 키워드 블랙아웃 기능
- **입력 방식**: 텍스트 영역 (줄바꿈으로 구분)
- **옵션**:
  - [ ] 키워드 블랙아웃 사용
  - 키워드 리스트: 텍스트 영역 (줄바꿈으로 여러 키워드 입력)
  - [ ] 대소문자 구분 (기본: OFF)
  - [ ] 실패 시 폴백 (Section Blur로 자동 전환, 기본: ON)
- **경고 메시지**: 
  - "베타 기능입니다. Notion DOM 구조 변경 시 자동으로 섹션 블러로 전환될 수 있습니다."
  - "브라우저 보안 제약으로 인해 작동하지 않을 수 있습니다."

---

### 7.2.7 저장 정책
- **설정 항목**: unlocked 상태 저장 기간 및 방식
- **입력 방식**: 선택 (드롭다운)
- **옵션**:
  - 세션만 (브라우저 닫으면 해제)
  - 7일
  - 30일 (기본)
  - 90일
- **저장 방식** (자동 선택, 사용자 설정 불가):
  - localStorage 우선
  - localStorage 실패 시 쿠키 사용
  - 둘 다 실패 시 세션만 유지

---

### 7.2.8 리드 저장 후 액션
- **설정 항목**: 리드 저장 후 자동으로 수행할 액션
- **입력 방식**: 텍스트 입력 및 체크박스
- **옵션**:
  - **Webhook URL**:
    - [ ] Webhook 활성화
    - URL 입력 필드
    - "Test" 버튼으로 테스트 전송
  - **Slack 알림** (Webhook 기반):
    - [ ] Slack 알림 활성화
    - Slack Webhook URL 입력
    - 메시지 포맷 선택 (간단/상세)
  - **CSV Export** (수동):
    - CSV 내보내기는 수동으로만 가능 (자동화 제외)

---

### 7.2.9 모바일/PC 별도 설정
- **설정 항목**: 모바일과 PC에서 다른 설정 적용
- **입력 방식**: 토글 및 각 설정별 모바일/PC 구분
- **옵션**:
  - [ ] 모바일/PC 별도 설정 사용
  - 모바일 설정:
    - UX 패턴 선택 (모바일 전용)
    - 폼 카피 (모바일 전용)
    - 블라인드 설정 (모바일 전용)
  - PC 설정:
    - UX 패턴 선택 (PC 전용)
    - 폼 카피 (PC 전용)
    - 블라인드 설정 (PC 전용)
- **기본값**: OFF (모바일/PC 동일 설정)

---

### 7.2.10 UTM 파라미터 자동 추가
- **설정 항목**: 공유 링크에 UTM 파라미터 자동 추가
- **입력 방식**: 텍스트 입력 및 체크박스
- **옵션**:
  - [ ] UTM 파라미터 자동 추가
  - utm_source: 텍스트 입력 (예: "linkedin")
  - utm_medium: 텍스트 입력 (예: "social")
  - utm_campaign: 텍스트 입력 (예: "template_2024")
- **설명**: "링크에 자동으로 UTM 파라미터가 추가되어 트래픽 소스를 추적할 수 있어요."

---

### 7.2.11 커스텀 도메인 (MVP에서는 UI만)
- **설정 항목**: 커스텀 도메인 설정 (UI만 제공)
- **입력 방식**: 텍스트 입력 필드
- **옵션**:
  - 커스텀 도메인 입력 (예: "https://your-domain.com")
- **안내 메시지**:
  - "커스텀 도메인 연결은 현재 베타 기능입니다."
  - "연결을 원하시면 support@formtion.app로 문의해 주세요."
  - 또는 "추후 제공 예정입니다."

---

## 설정 화면 구조

### 기본 화면 (단순 설정)
```
┌─────────────────────────────────────┐
│  Notion URL                         │
│  [텍스트 입력 필드]                 │
│  [Load preview]                     │
├─────────────────────────────────────┤
│  UX 패턴 선택                       │
│  ☐ 상단 폼  ☐ 하단 폼              │
│  ☐ Entry 모달  ☐ Floating CTA     │
│  ☐ Inline Blur Gate                │
├─────────────────────────────────────┤
│  폼 필드 선택                       │
│  ✓ 이메일 (필수)                    │
│  ☐ 이름  ☐ 회사명  ☐ 직무          │
│  ☐ 한 줄 질문                       │
├─────────────────────────────────────┤
│  동의 옵션                          │
│  ☐ 개인정보 처리 동의 (필수/선택)   │
│  ☐ 마케팅 수신 동의                 │
├─────────────────────────────────────┤
│  상단 폼 카피 (상단 폼 ON인 경우)   │
│  Title: [텍스트 입력]               │
│  Sub-title: [텍스트 입력]           │
├─────────────────────────────────────┤
│  하단 폼 카피 (하단 폼 ON인 경우)   │
│  Title: [텍스트 입력]               │
│  Sub-title: [텍스트 입력]           │
├─────────────────────────────────────┤
│  해제 유지 방식                     │
│  ○ 세션만  ○ 7일  ● 30일          │
├─────────────────────────────────────┤
│  [▼ 고급 설정 보기]                 │
│  [저장] [미리보기]                  │
└─────────────────────────────────────┘
```

### 고급 설정 (접혀있음, 클릭 시 펼쳐짐)
```
┌─────────────────────────────────────┐
│  [▲ 고급 설정 숨기기]               │
├─────────────────────────────────────┤
│  Inline Blur Gate 위치              │
│  [프리셋 선택 또는 직접 입력]       │
├─────────────────────────────────────┤
│  블라인드 강도                      │
│  [약]━━━●━━━━━━[중]━━━━━━[강]      │
├─────────────────────────────────────┤
│  Preview 높이 (Preview-Then-Blur)   │
│  [숫자 입력] 줄 또는 [숫자]%        │
├─────────────────────────────────────┤
│  Entry Modal 설정                   │
│  ☐ 닫기 버튼 허용                  │
│  자동 오픈: [즉시 ▼]                │
│  ☐ 미리보기 허용                    │
├─────────────────────────────────────┤
│  Floating CTA 설정                  │
│  버튼 라벨: [텍스트 입력]           │
│  ☐ 모바일 하단 고정                 │
├─────────────────────────────────────┤
│  Keyword Blackout (베타)            │
│  ☐ 키워드 블랙아웃 사용             │
│  키워드 리스트:                     │
│  [텍스트 영역]                      │
│  ☐ 대소문자 구분                    │
│  ☐ 실패 시 폴백                    │
├─────────────────────────────────────┤
│  저장 정책                          │
│  [세션만 ▼]                         │
├─────────────────────────────────────┤
│  리드 저장 후 액션                  │
│  ☐ Webhook 활성화                  │
│  Webhook URL: [텍스트 입력]        │
│  [Test]                             │
│  ☐ Slack 알림 활성화               │
│  Slack Webhook URL: [텍스트 입력]  │
├─────────────────────────────────────┤
│  모바일/PC 별도 설정                │
│  ☐ 모바일/PC 별도 설정 사용         │
│  [모바일 설정] [PC 설정]            │
├─────────────────────────────────────┤
│  UTM 파라미터 자동 추가             │
│  ☐ UTM 파라미터 자동 추가          │
│  utm_source: [텍스트 입력]          │
│  utm_medium: [텍스트 입력]          │
│  utm_campaign: [텍스트 입력]        │
├─────────────────────────────────────┤
│  커스텀 도메인 (베타)               │
│  커스텀 도메인: [텍스트 입력]       │
│  [안내: 추후 제공 예정]             │
└─────────────────────────────────────┘
```

---

## 설정 검증 및 에러 처리

### 필수 필드 검증
- Notion URL: 반드시 입력, 유효한 URL 형식
- UX 패턴: 최소 1개 선택
- 이메일 필드: 항상 포함 (변경 불가)

### 선택 필드 검증
- 상단/하단 폼 카피: 해당 폼이 ON인 경우에만 필수
- Webhook URL: Webhook 활성화 시 필수
- 키워드 리스트: Keyword Blackout 사용 시 필수

### 에러 메시지
- 필수 필드 미입력: "이 필드는 필수입니다."
- URL 형식 오류: "올바른 URL 형식을 입력해 주세요."
- 중복 설정: "이미 설정된 옵션입니다."

---

## 설정 저장 및 불러오기

### 저장
- "저장" 버튼 클릭 시 모든 설정을 JSON 형태로 저장
- 저장 성공 시 토스트 메시지: "저장되었어요."
- 저장 실패 시 에러 메시지 표시

### 불러오기
- 프로젝트 설정 화면 진입 시 기존 설정 불러오기
- 설정이 없을 때는 기본값 적용

### 기본값 (Defaults)
- UX 패턴: 없음 (사용자 선택 필수)
- 폼 필드: 이메일만 (필수)
- 동의 옵션: 개인정보 처리 동의 (필수), 마케팅 수신 동의 (OFF)
- 해제 유지: 30일
- 블라인드 강도: 중
- Entry Modal: 닫기 허용 OFF, 즉시 오픈
- Floating CTA: 라벨 "Unlock", 모바일 하단 고정 ON

---

## 설정 내보내기/가져오기 (추후 추가 가능)

### 내보내기
- 프로젝트 설정을 JSON 파일로 내보내기
- 다른 프로젝트에 적용하거나 백업용

### 가져오기
- JSON 파일을 불러와서 설정 적용
- 템플릿처럼 사용 가능

> MVP에서는 제외, 추후 추가 가능






